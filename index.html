<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Wype</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.16.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>
    <script src="script.js" defer></script>
    <link rel="stylesheet" href="styles.css" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="manifest" href="manifest.json" />
  </head>

  <body>
    <div id="desktop-message" style="display: none;">
      <div class="desktop-content">
        <h1>WYPE</h1>
        <h2>Mobile Device Required</h2>
        <p>This app is designed for mobile devices with camera access.</p>
        <div class="instruction-box">
          <p><strong>To use Wype:</strong></p>
          <ol>
            <li>Open this page on your mobile phone</li>
            <li>Visit: <strong>wype.badori.io</strong></li>
            <li>Grant camera permissions</li>
            <li>Start walking and typing safely!</li>
          </ol>
        </div>
        <div class="qr-section">
          <img id="qr-code" src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://wype.badori.io" alt="QR Code for wype.badori.io" />
          <p>Scan QR code or visit on mobile</p>
          <p class="url"><strong>wype.badori.io</strong></p>
        </div>
        
        <div class="desktop-license">
          <p>Licensed under <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
          <p class="license-footer">Â© Badoriio <span id="desktop-year"></span> â€¢ <a href="https://github.com/badoriio" target="_blank">GitHub</a></p>
        </div>
      </div>
    </div>

    <div id="main">
      <h1>WYPE</h1>
      <h3>Walk and type safely</h3>
      <div id="camera-container">
        <div id="preview-placeholder" onclick="handleCameraClick()">
          <div class="placeholder-content">
            <div class="camera-icon">ðŸ“·</div>
            <p>Camera Preview</p>
            <span>Tap here to start</span>
          </div>
        </div>
        
        <video id="video" autoplay muted playsinline onclick="handleCameraClick()" disablePictureInPictureControls></video>
      </div>

      <button id="detectBtn" onclick="toggleDetection()" disabled>
        Start Detection
      </button>

      <p id="approval" style="display: none">
        Now you can minimize this window and use the app in PiP mode.
      </p>
    </div>

    <footer>
      <p>Licensed under <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
      <p>&copy; Badoriio <span id="year"></span> â€¢ <a href="https://github.com/badoriio" target="_blank" id="footer-link">GitHub</a></p>
    </footer>
  </body>
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
    const desktopYear = document.getElementById("desktop-year");
    if (desktopYear) {
      desktopYear.textContent = new Date().getFullYear();
    }
  </script>
</html>
